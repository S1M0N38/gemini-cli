
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://S1M0N38.github.io/gemini-cli/tools/mcp-server/">
      
      
        <link rel="prev" href="../file-system/">
      
      
        <link rel="next" href="../memory/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>MCP servers with the Gemini CLI - Gemini CLI</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mcp-servers-with-the-gemini-cli" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Gemini CLI" class="md-header__button md-logo" aria-label="Gemini CLI" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M9.4 86.6c-12.5-12.5-12.5-32.7 0-45.2s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256zM256 416h288c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32s14.3-32 32-32"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Gemini CLI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              MCP servers with the Gemini CLI
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/S1M0N38/gemini-cli" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    S1M0N38/gemini-cli
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Gemini CLI" class="md-nav__button md-logo" aria-label="Gemini CLI" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M9.4 86.6c-12.5-12.5-12.5-32.7 0-45.2s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256zM256 416h288c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32s14.3-32 32-32"/></svg>

    </a>
    Gemini CLI
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/S1M0N38/gemini-cli" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    S1M0N38/gemini-cli
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome to Gemini CLI documentation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI Architecture Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../checkpointing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Checkpointing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI Execution and Deployment
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI Extensions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integration-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integration Tests
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../npm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Package Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quota-and-pricing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI: Quotas and Pricing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sandbox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sandboxing in the Gemini CLI
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../telemetry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI Observability Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tos-privacy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI: Terms of Service and Privacy Notice
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Uninstall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Uninstall
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    CLI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            CLI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentication Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/themes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Themes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/token-caching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Token Caching and Cost Optimization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI Core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/memport/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory Import Processor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/tools-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI Core: Tools API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/proxy-script/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Example Proxy Script
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_17" checked>
        
          
          <label class="md-nav__link" for="__nav_17" id="__nav_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../file-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini CLI file system tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    MCP servers with the Gemini CLI
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    MCP servers with the Gemini CLI
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-an-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      What is an MCP server?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-integration-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Core Integration Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Integration Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#discovery-layer-mcp-clientts" class="md-nav__link">
    <span class="md-ellipsis">
      Discovery Layer (mcp-client.ts)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execution-layer-mcp-toolts" class="md-nav__link">
    <span class="md-ellipsis">
      Execution Layer (mcp-tool.ts)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transport-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      Transport Mechanisms
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-set-up-your-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      How to set up your MCP server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to set up your MCP server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-the-mcp-server-in-settingsjson" class="md-nav__link">
    <span class="md-ellipsis">
      Configure the MCP server in settings.json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Properties
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-one-of-the-following" class="md-nav__link">
    <span class="md-ellipsis">
      Required (one of the following)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional" class="md-nav__link">
    <span class="md-ellipsis">
      Optional
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      Example Configurations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example Configurations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-mcp-server-stdio" class="md-nav__link">
    <span class="md-ellipsis">
      Python MCP Server (Stdio)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nodejs-mcp-server-stdio" class="md-nav__link">
    <span class="md-ellipsis">
      Node.js MCP Server (Stdio)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-based-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      Docker-based MCP Server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-based-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP-based MCP Server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-based-mcp-server-with-custom-headers" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP-based MCP Server with Custom Headers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#discovery-process-deep-dive" class="md-nav__link">
    <span class="md-ellipsis">
      Discovery Process Deep Dive
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Discovery Process Deep Dive">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-server-iteration-and-connection" class="md-nav__link">
    <span class="md-ellipsis">
      1. Server Iteration and Connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-tool-discovery" class="md-nav__link">
    <span class="md-ellipsis">
      2. Tool Discovery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-conflict-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      3. Conflict Resolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-schema-processing" class="md-nav__link">
    <span class="md-ellipsis">
      4. Schema Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-connection-management" class="md-nav__link">
    <span class="md-ellipsis">
      5. Connection Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tool-execution-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Tool Execution Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tool Execution Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-tool-invocation" class="md-nav__link">
    <span class="md-ellipsis">
      1. Tool Invocation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-confirmation-process" class="md-nav__link">
    <span class="md-ellipsis">
      2. Confirmation Process
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Confirmation Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trust-based-bypass" class="md-nav__link">
    <span class="md-ellipsis">
      Trust-based Bypass
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-allow-listing" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic Allow-listing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-choice-handling" class="md-nav__link">
    <span class="md-ellipsis">
      User Choice Handling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-execution" class="md-nav__link">
    <span class="md-ellipsis">
      3. Execution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-response-handling" class="md-nav__link">
    <span class="md-ellipsis">
      4. Response Handling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-interact-with-your-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      How to interact with your MCP server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to interact with your MCP server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-mcp-command" class="md-nav__link">
    <span class="md-ellipsis">
      Using the /mcp Command
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-mcp-output" class="md-nav__link">
    <span class="md-ellipsis">
      Example /mcp Output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tool-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Tool Usage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#status-monitoring-and-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Status Monitoring and Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Status Monitoring and Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connection-states" class="md-nav__link">
    <span class="md-ellipsis">
      Connection States
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connection States">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server-status-mcpserverstatus" class="md-nav__link">
    <span class="md-ellipsis">
      Server Status (MCPServerStatus)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discovery-state-mcpdiscoverystate" class="md-nav__link">
    <span class="md-ellipsis">
      Discovery State (MCPDiscoveryState)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-issues-and-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues and Solutions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues and Solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server-wont-connect" class="md-nav__link">
    <span class="md-ellipsis">
      Server Won't Connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-tools-discovered" class="md-nav__link">
    <span class="md-ellipsis">
      No Tools Discovered
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tools-not-executing" class="md-nav__link">
    <span class="md-ellipsis">
      Tools Not Executing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandbox-compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      Sandbox Compatibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging Tips
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#important-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Important Notes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Important Notes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Security Considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-and-resource-management" class="md-nav__link">
    <span class="md-ellipsis">
      Performance and Resource Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema-compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      Schema Compatibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory Tool (save_memory)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multi-file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi File Read Tool (read_many_files)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shell/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shell Tool (run_shell_command)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../web-fetch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web Fetch Tool (web_fetch)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../web-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web Search Tool (google_web_search)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-an-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      What is an MCP server?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-integration-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Core Integration Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Integration Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#discovery-layer-mcp-clientts" class="md-nav__link">
    <span class="md-ellipsis">
      Discovery Layer (mcp-client.ts)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execution-layer-mcp-toolts" class="md-nav__link">
    <span class="md-ellipsis">
      Execution Layer (mcp-tool.ts)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transport-mechanisms" class="md-nav__link">
    <span class="md-ellipsis">
      Transport Mechanisms
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-set-up-your-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      How to set up your MCP server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to set up your MCP server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-the-mcp-server-in-settingsjson" class="md-nav__link">
    <span class="md-ellipsis">
      Configure the MCP server in settings.json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Properties
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Properties">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-one-of-the-following" class="md-nav__link">
    <span class="md-ellipsis">
      Required (one of the following)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional" class="md-nav__link">
    <span class="md-ellipsis">
      Optional
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-configurations" class="md-nav__link">
    <span class="md-ellipsis">
      Example Configurations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example Configurations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-mcp-server-stdio" class="md-nav__link">
    <span class="md-ellipsis">
      Python MCP Server (Stdio)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nodejs-mcp-server-stdio" class="md-nav__link">
    <span class="md-ellipsis">
      Node.js MCP Server (Stdio)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-based-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      Docker-based MCP Server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-based-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP-based MCP Server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-based-mcp-server-with-custom-headers" class="md-nav__link">
    <span class="md-ellipsis">
      HTTP-based MCP Server with Custom Headers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#discovery-process-deep-dive" class="md-nav__link">
    <span class="md-ellipsis">
      Discovery Process Deep Dive
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Discovery Process Deep Dive">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-server-iteration-and-connection" class="md-nav__link">
    <span class="md-ellipsis">
      1. Server Iteration and Connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-tool-discovery" class="md-nav__link">
    <span class="md-ellipsis">
      2. Tool Discovery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-conflict-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      3. Conflict Resolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-schema-processing" class="md-nav__link">
    <span class="md-ellipsis">
      4. Schema Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-connection-management" class="md-nav__link">
    <span class="md-ellipsis">
      5. Connection Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tool-execution-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Tool Execution Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tool Execution Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-tool-invocation" class="md-nav__link">
    <span class="md-ellipsis">
      1. Tool Invocation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-confirmation-process" class="md-nav__link">
    <span class="md-ellipsis">
      2. Confirmation Process
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Confirmation Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trust-based-bypass" class="md-nav__link">
    <span class="md-ellipsis">
      Trust-based Bypass
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-allow-listing" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic Allow-listing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-choice-handling" class="md-nav__link">
    <span class="md-ellipsis">
      User Choice Handling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-execution" class="md-nav__link">
    <span class="md-ellipsis">
      3. Execution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-response-handling" class="md-nav__link">
    <span class="md-ellipsis">
      4. Response Handling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-interact-with-your-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      How to interact with your MCP server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to interact with your MCP server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-mcp-command" class="md-nav__link">
    <span class="md-ellipsis">
      Using the /mcp Command
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-mcp-output" class="md-nav__link">
    <span class="md-ellipsis">
      Example /mcp Output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tool-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Tool Usage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#status-monitoring-and-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Status Monitoring and Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Status Monitoring and Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connection-states" class="md-nav__link">
    <span class="md-ellipsis">
      Connection States
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connection States">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server-status-mcpserverstatus" class="md-nav__link">
    <span class="md-ellipsis">
      Server Status (MCPServerStatus)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discovery-state-mcpdiscoverystate" class="md-nav__link">
    <span class="md-ellipsis">
      Discovery State (MCPDiscoveryState)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-issues-and-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues and Solutions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues and Solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#server-wont-connect" class="md-nav__link">
    <span class="md-ellipsis">
      Server Won't Connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#no-tools-discovered" class="md-nav__link">
    <span class="md-ellipsis">
      No Tools Discovered
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tools-not-executing" class="md-nav__link">
    <span class="md-ellipsis">
      Tools Not Executing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sandbox-compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      Sandbox Compatibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging Tips
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#important-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Important Notes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Important Notes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Security Considerations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-and-resource-management" class="md-nav__link">
    <span class="md-ellipsis">
      Performance and Resource Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schema-compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      Schema Compatibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="mcp-servers-with-the-gemini-cli">MCP servers with the Gemini CLI</h1>
<p>This document provides a guide to configuring and using Model Context Protocol (MCP) servers with the Gemini CLI.</p>
<h2 id="what-is-an-mcp-server">What is an MCP server?</h2>
<p>An MCP server is an application that exposes tools and resources to the Gemini CLI through the Model Context Protocol, allowing it to interact with external systems and data sources. MCP servers act as a bridge between the Gemini model and your local environment or other services like APIs.</p>
<p>An MCP server enables the Gemini CLI to:</p>
<ul>
<li><strong>Discover tools:</strong> List available tools, their descriptions, and parameters through standardized schema definitions.</li>
<li><strong>Execute tools:</strong> Call specific tools with defined arguments and receive structured responses.</li>
<li><strong>Access resources:</strong> Read data from specific resources (though the Gemini CLI primarily focuses on tool execution).</li>
</ul>
<p>With an MCP server, you can extend the Gemini CLI's capabilities to perform actions beyond its built-in features, such as interacting with databases, APIs, custom scripts, or specialized workflows.</p>
<h2 id="core-integration-architecture">Core Integration Architecture</h2>
<p>The Gemini CLI integrates with MCP servers through a sophisticated discovery and execution system built into the core package (<code>packages/core/src/tools/</code>):</p>
<h3 id="discovery-layer-mcp-clientts">Discovery Layer (<code>mcp-client.ts</code>)</h3>
<p>The discovery process is orchestrated by <code>discoverMcpTools()</code>, which:</p>
<ol>
<li><strong>Iterates through configured servers</strong> from your <code>settings.json</code> <code>mcpServers</code> configuration</li>
<li><strong>Establishes connections</strong> using appropriate transport mechanisms (Stdio, SSE, or Streamable HTTP)</li>
<li><strong>Fetches tool definitions</strong> from each server using the MCP protocol</li>
<li><strong>Sanitizes and validates</strong> tool schemas for compatibility with the Gemini API</li>
<li><strong>Registers tools</strong> in the global tool registry with conflict resolution</li>
</ol>
<h3 id="execution-layer-mcp-toolts">Execution Layer (<code>mcp-tool.ts</code>)</h3>
<p>Each discovered MCP tool is wrapped in a <code>DiscoveredMCPTool</code> instance that:</p>
<ul>
<li><strong>Handles confirmation logic</strong> based on server trust settings and user preferences</li>
<li><strong>Manages tool execution</strong> by calling the MCP server with proper parameters</li>
<li><strong>Processes responses</strong> for both the LLM context and user display</li>
<li><strong>Maintains connection state</strong> and handles timeouts</li>
</ul>
<h3 id="transport-mechanisms">Transport Mechanisms</h3>
<p>The Gemini CLI supports three MCP transport types:</p>
<ul>
<li><strong>Stdio Transport:</strong> Spawns a subprocess and communicates via stdin/stdout</li>
<li><strong>SSE Transport:</strong> Connects to Server-Sent Events endpoints</li>
<li><strong>Streamable HTTP Transport:</strong> Uses HTTP streaming for communication</li>
</ul>
<h2 id="how-to-set-up-your-mcp-server">How to set up your MCP server</h2>
<p>The Gemini CLI uses the <code>mcpServers</code> configuration in your <code>settings.json</code> file to locate and connect to MCP servers. This configuration supports multiple servers with different transport mechanisms.</p>
<h3 id="configure-the-mcp-server-in-settingsjson">Configure the MCP server in settings.json</h3>
<p>You can configure MCP servers at the global level in the <code>~/.gemini/settings.json</code> file or in your project's root directory, create or open the <code>.gemini/settings.json</code> file. Within the file, add the <code>mcpServers</code> configuration block.</p>
<h3 id="configuration-structure">Configuration Structure</h3>
<p>Add an <code>mcpServers</code> object to your <code>settings.json</code> file:</p>
<pre><code class="language-json">{ ...file contains other config objects
  &quot;mcpServers&quot;: {
    &quot;serverName&quot;: {
      &quot;command&quot;: &quot;path/to/server&quot;,
      &quot;args&quot;: [&quot;--arg1&quot;, &quot;value1&quot;],
      &quot;env&quot;: {
        &quot;API_KEY&quot;: &quot;$MY_API_TOKEN&quot;
      },
      &quot;cwd&quot;: &quot;./server-directory&quot;,
      &quot;timeout&quot;: 30000,
      &quot;trust&quot;: false
    }
  }
}
</code></pre>
<h3 id="configuration-properties">Configuration Properties</h3>
<p>Each server configuration supports the following properties:</p>
<h4 id="required-one-of-the-following">Required (one of the following)</h4>
<ul>
<li><strong><code>command</code></strong> (string): Path to the executable for Stdio transport</li>
<li><strong><code>url</code></strong> (string): SSE endpoint URL (e.g., <code>"http://localhost:8080/sse"</code>)</li>
<li><strong><code>httpUrl</code></strong> (string): HTTP streaming endpoint URL</li>
</ul>
<h4 id="optional">Optional</h4>
<ul>
<li><strong><code>args</code></strong> (string[]): Command-line arguments for Stdio transport</li>
<li><strong><code>headers</code></strong> (object): Custom HTTP headers when using <code>httpUrl</code></li>
<li><strong><code>env</code></strong> (object): Environment variables for the server process. Values can reference environment variables using <code>$VAR_NAME</code> or <code>${VAR_NAME}</code> syntax</li>
<li><strong><code>cwd</code></strong> (string): Working directory for Stdio transport</li>
<li><strong><code>timeout</code></strong> (number): Request timeout in milliseconds (default: 600,000ms = 10 minutes)</li>
<li><strong><code>trust</code></strong> (boolean): When <code>true</code>, bypasses all tool call confirmations for this server (default: <code>false</code>)</li>
</ul>
<h3 id="example-configurations">Example Configurations</h3>
<h4 id="python-mcp-server-stdio">Python MCP Server (Stdio)</h4>
<pre><code class="language-json">{
  &quot;mcpServers&quot;: {
    &quot;pythonTools&quot;: {
      &quot;command&quot;: &quot;python&quot;,
      &quot;args&quot;: [&quot;-m&quot;, &quot;my_mcp_server&quot;, &quot;--port&quot;, &quot;8080&quot;],
      &quot;cwd&quot;: &quot;./mcp-servers/python&quot;,
      &quot;env&quot;: {
        &quot;DATABASE_URL&quot;: &quot;$DB_CONNECTION_STRING&quot;,
        &quot;API_KEY&quot;: &quot;${EXTERNAL_API_KEY}&quot;
      },
      &quot;timeout&quot;: 15000
    }
  }
}
</code></pre>
<h4 id="nodejs-mcp-server-stdio">Node.js MCP Server (Stdio)</h4>
<pre><code class="language-json">{
  &quot;mcpServers&quot;: {
    &quot;nodeServer&quot;: {
      &quot;command&quot;: &quot;node&quot;,
      &quot;args&quot;: [&quot;dist/server.js&quot;, &quot;--verbose&quot;],
      &quot;cwd&quot;: &quot;./mcp-servers/node&quot;,
      &quot;trust&quot;: true
    }
  }
}
</code></pre>
<h4 id="docker-based-mcp-server">Docker-based MCP Server</h4>
<pre><code class="language-json">{
  &quot;mcpServers&quot;: {
    &quot;dockerizedServer&quot;: {
      &quot;command&quot;: &quot;docker&quot;,
      &quot;args&quot;: [
        &quot;run&quot;,
        &quot;-i&quot;,
        &quot;--rm&quot;,
        &quot;-e&quot;,
        &quot;API_KEY&quot;,
        &quot;-v&quot;,
        &quot;${PWD}:/workspace&quot;,
        &quot;my-mcp-server:latest&quot;
      ],
      &quot;env&quot;: {
        &quot;API_KEY&quot;: &quot;$EXTERNAL_SERVICE_TOKEN&quot;
      }
    }
  }
}
</code></pre>
<h4 id="http-based-mcp-server">HTTP-based MCP Server</h4>
<pre><code class="language-json">{
  &quot;mcpServers&quot;: {
    &quot;httpServer&quot;: {
      &quot;httpUrl&quot;: &quot;http://localhost:3000/mcp&quot;,
      &quot;timeout&quot;: 5000
    }
  }
}
</code></pre>
<h4 id="http-based-mcp-server-with-custom-headers">HTTP-based MCP Server with Custom Headers</h4>
<pre><code class="language-json">{
  &quot;mcpServers&quot;: {
    &quot;httpServerWithAuth&quot;: {
      &quot;httpUrl&quot;: &quot;http://localhost:3000/mcp&quot;,
      &quot;headers&quot;: {
        &quot;Authorization&quot;: &quot;Bearer your-api-token&quot;,
        &quot;X-Custom-Header&quot;: &quot;custom-value&quot;,
        &quot;Content-Type&quot;: &quot;application/json&quot;
      },
      &quot;timeout&quot;: 5000
    }
  }
}
</code></pre>
<h2 id="discovery-process-deep-dive">Discovery Process Deep Dive</h2>
<p>When the Gemini CLI starts, it performs MCP server discovery through the following detailed process:</p>
<h3 id="1-server-iteration-and-connection">1. Server Iteration and Connection</h3>
<p>For each configured server in <code>mcpServers</code>:</p>
<ol>
<li><strong>Status tracking begins:</strong> Server status is set to <code>CONNECTING</code></li>
<li><strong>Transport selection:</strong> Based on configuration properties:</li>
<li><code>httpUrl</code>  <code>StreamableHTTPClientTransport</code></li>
<li><code>url</code>  <code>SSEClientTransport</code></li>
<li><code>command</code>  <code>StdioClientTransport</code></li>
<li><strong>Connection establishment:</strong> The MCP client attempts to connect with the configured timeout</li>
<li><strong>Error handling:</strong> Connection failures are logged and the server status is set to <code>DISCONNECTED</code></li>
</ol>
<h3 id="2-tool-discovery">2. Tool Discovery</h3>
<p>Upon successful connection:</p>
<ol>
<li><strong>Tool listing:</strong> The client calls the MCP server's tool listing endpoint</li>
<li><strong>Schema validation:</strong> Each tool's function declaration is validated</li>
<li><strong>Name sanitization:</strong> Tool names are cleaned to meet Gemini API requirements:</li>
<li>Invalid characters (non-alphanumeric, underscore, dot, hyphen) are replaced with underscores</li>
<li>Names longer than 63 characters are truncated with middle replacement (<code>___</code>)</li>
</ol>
<h3 id="3-conflict-resolution">3. Conflict Resolution</h3>
<p>When multiple servers expose tools with the same name:</p>
<ol>
<li><strong>First registration wins:</strong> The first server to register a tool name gets the unprefixed name</li>
<li><strong>Automatic prefixing:</strong> Subsequent servers get prefixed names: <code>serverName__toolName</code></li>
<li><strong>Registry tracking:</strong> The tool registry maintains mappings between server names and their tools</li>
</ol>
<h3 id="4-schema-processing">4. Schema Processing</h3>
<p>Tool parameter schemas undergo sanitization for Gemini API compatibility:</p>
<ul>
<li><strong><code>$schema</code> properties</strong> are removed</li>
<li><strong><code>additionalProperties</code></strong> are stripped</li>
<li><strong><code>anyOf</code> with <code>default</code></strong> have their default values removed (Vertex AI compatibility)</li>
<li><strong>Recursive processing</strong> applies to nested schemas</li>
</ul>
<h3 id="5-connection-management">5. Connection Management</h3>
<p>After discovery:</p>
<ul>
<li><strong>Persistent connections:</strong> Servers that successfully register tools maintain their connections</li>
<li><strong>Cleanup:</strong> Servers that provide no usable tools have their connections closed</li>
<li><strong>Status updates:</strong> Final server statuses are set to <code>CONNECTED</code> or <code>DISCONNECTED</code></li>
</ul>
<h2 id="tool-execution-flow">Tool Execution Flow</h2>
<p>When the Gemini model decides to use an MCP tool, the following execution flow occurs:</p>
<h3 id="1-tool-invocation">1. Tool Invocation</h3>
<p>The model generates a <code>FunctionCall</code> with:</p>
<ul>
<li><strong>Tool name:</strong> The registered name (potentially prefixed)</li>
<li><strong>Arguments:</strong> JSON object matching the tool's parameter schema</li>
</ul>
<h3 id="2-confirmation-process">2. Confirmation Process</h3>
<p>Each <code>DiscoveredMCPTool</code> implements sophisticated confirmation logic:</p>
<h4 id="trust-based-bypass">Trust-based Bypass</h4>
<pre><code class="language-typescript">if (this.trust) {
  return false; // No confirmation needed
}
</code></pre>
<h4 id="dynamic-allow-listing">Dynamic Allow-listing</h4>
<p>The system maintains internal allow-lists for:</p>
<ul>
<li><strong>Server-level:</strong> <code>serverName</code>  All tools from this server are trusted</li>
<li><strong>Tool-level:</strong> <code>serverName.toolName</code>  This specific tool is trusted</li>
</ul>
<h4 id="user-choice-handling">User Choice Handling</h4>
<p>When confirmation is required, users can choose:</p>
<ul>
<li><strong>Proceed once:</strong> Execute this time only</li>
<li><strong>Always allow this tool:</strong> Add to tool-level allow-list</li>
<li><strong>Always allow this server:</strong> Add to server-level allow-list</li>
<li><strong>Cancel:</strong> Abort execution</li>
</ul>
<h3 id="3-execution">3. Execution</h3>
<p>Upon confirmation (or trust bypass):</p>
<ol>
<li><strong>Parameter preparation:</strong> Arguments are validated against the tool's schema</li>
<li><strong>MCP call:</strong> The underlying <code>CallableTool</code> invokes the server with:</li>
</ol>
<p><code>typescript
   const functionCalls = [
     {
       name: this.serverToolName, // Original server tool name
       args: params,
     },
   ];</code></p>
<ol>
<li><strong>Response processing:</strong> Results are formatted for both LLM context and user display</li>
</ol>
<h3 id="4-response-handling">4. Response Handling</h3>
<p>The execution result contains:</p>
<ul>
<li><strong><code>llmContent</code>:</strong> Raw response parts for the language model's context</li>
<li><strong><code>returnDisplay</code>:</strong> Formatted output for user display (often JSON in markdown code blocks)</li>
</ul>
<h2 id="how-to-interact-with-your-mcp-server">How to interact with your MCP server</h2>
<h3 id="using-the-mcp-command">Using the <code>/mcp</code> Command</h3>
<p>The <code>/mcp</code> command provides comprehensive information about your MCP server setup:</p>
<pre><code class="language-bash">/mcp
</code></pre>
<p>This displays:</p>
<ul>
<li><strong>Server list:</strong> All configured MCP servers</li>
<li><strong>Connection status:</strong> <code>CONNECTED</code>, <code>CONNECTING</code>, or <code>DISCONNECTED</code></li>
<li><strong>Server details:</strong> Configuration summary (excluding sensitive data)</li>
<li><strong>Available tools:</strong> List of tools from each server with descriptions</li>
<li><strong>Discovery state:</strong> Overall discovery process status</li>
</ul>
<h3 id="example-mcp-output">Example <code>/mcp</code> Output</h3>
<pre><code>MCP Servers Status:

 pythonTools (CONNECTED)
  Command: python -m my_mcp_server --port 8080
  Working Directory: ./mcp-servers/python
  Timeout: 15000ms
  Tools: calculate_sum, file_analyzer, data_processor

 nodeServer (DISCONNECTED)
  Command: node dist/server.js --verbose
  Error: Connection refused

 dockerizedServer (CONNECTED)
  Command: docker run -i --rm -e API_KEY my-mcp-server:latest
  Tools: docker__deploy, docker__status

Discovery State: COMPLETED
</code></pre>
<h3 id="tool-usage">Tool Usage</h3>
<p>Once discovered, MCP tools are available to the Gemini model like built-in tools. The model will automatically:</p>
<ol>
<li><strong>Select appropriate tools</strong> based on your requests</li>
<li><strong>Present confirmation dialogs</strong> (unless the server is trusted)</li>
<li><strong>Execute tools</strong> with proper parameters</li>
<li><strong>Display results</strong> in a user-friendly format</li>
</ol>
<h2 id="status-monitoring-and-troubleshooting">Status Monitoring and Troubleshooting</h2>
<h3 id="connection-states">Connection States</h3>
<p>The MCP integration tracks several states:</p>
<h4 id="server-status-mcpserverstatus">Server Status (<code>MCPServerStatus</code>)</h4>
<ul>
<li><strong><code>DISCONNECTED</code>:</strong> Server is not connected or has errors</li>
<li><strong><code>CONNECTING</code>:</strong> Connection attempt in progress</li>
<li><strong><code>CONNECTED</code>:</strong> Server is connected and ready</li>
</ul>
<h4 id="discovery-state-mcpdiscoverystate">Discovery State (<code>MCPDiscoveryState</code>)</h4>
<ul>
<li><strong><code>NOT_STARTED</code>:</strong> Discovery hasn't begun</li>
<li><strong><code>IN_PROGRESS</code>:</strong> Currently discovering servers</li>
<li><strong><code>COMPLETED</code>:</strong> Discovery finished (with or without errors)</li>
</ul>
<h3 id="common-issues-and-solutions">Common Issues and Solutions</h3>
<h4 id="server-wont-connect">Server Won't Connect</h4>
<p><strong>Symptoms:</strong> Server shows <code>DISCONNECTED</code> status</p>
<p><strong>Troubleshooting:</strong></p>
<ol>
<li><strong>Check configuration:</strong> Verify <code>command</code>, <code>args</code>, and <code>cwd</code> are correct</li>
<li><strong>Test manually:</strong> Run the server command directly to ensure it works</li>
<li><strong>Check dependencies:</strong> Ensure all required packages are installed</li>
<li><strong>Review logs:</strong> Look for error messages in the CLI output</li>
<li><strong>Verify permissions:</strong> Ensure the CLI can execute the server command</li>
</ol>
<h4 id="no-tools-discovered">No Tools Discovered</h4>
<p><strong>Symptoms:</strong> Server connects but no tools are available</p>
<p><strong>Troubleshooting:</strong></p>
<ol>
<li><strong>Verify tool registration:</strong> Ensure your server actually registers tools</li>
<li><strong>Check MCP protocol:</strong> Confirm your server implements the MCP tool listing correctly</li>
<li><strong>Review server logs:</strong> Check stderr output for server-side errors</li>
<li><strong>Test tool listing:</strong> Manually test your server's tool discovery endpoint</li>
</ol>
<h4 id="tools-not-executing">Tools Not Executing</h4>
<p><strong>Symptoms:</strong> Tools are discovered but fail during execution</p>
<p><strong>Troubleshooting:</strong></p>
<ol>
<li><strong>Parameter validation:</strong> Ensure your tool accepts the expected parameters</li>
<li><strong>Schema compatibility:</strong> Verify your input schemas are valid JSON Schema</li>
<li><strong>Error handling:</strong> Check if your tool is throwing unhandled exceptions</li>
<li><strong>Timeout issues:</strong> Consider increasing the <code>timeout</code> setting</li>
</ol>
<h4 id="sandbox-compatibility">Sandbox Compatibility</h4>
<p><strong>Symptoms:</strong> MCP servers fail when sandboxing is enabled</p>
<p><strong>Solutions:</strong></p>
<ol>
<li><strong>Docker-based servers:</strong> Use Docker containers that include all dependencies</li>
<li><strong>Path accessibility:</strong> Ensure server executables are available in the sandbox</li>
<li><strong>Network access:</strong> Configure sandbox to allow necessary network connections</li>
<li><strong>Environment variables:</strong> Verify required environment variables are passed through</li>
</ol>
<h3 id="debugging-tips">Debugging Tips</h3>
<ol>
<li><strong>Enable debug mode:</strong> Run the CLI with <code>--debug</code> for verbose output</li>
<li><strong>Check stderr:</strong> MCP server stderr is captured and logged (INFO messages filtered)</li>
<li><strong>Test isolation:</strong> Test your MCP server independently before integrating</li>
<li><strong>Incremental setup:</strong> Start with simple tools before adding complex functionality</li>
<li><strong>Use <code>/mcp</code> frequently:</strong> Monitor server status during development</li>
</ol>
<h2 id="important-notes">Important Notes</h2>
<h3 id="security-considerations">Security Considerations</h3>
<ul>
<li><strong>Trust settings:</strong> The <code>trust</code> option bypasses all confirmation dialogs. Use cautiously and only for servers you completely control</li>
<li><strong>Access tokens:</strong> Be security-aware when configuring environment variables containing API keys or tokens</li>
<li><strong>Sandbox compatibility:</strong> When using sandboxing, ensure MCP servers are available within the sandbox environment</li>
<li><strong>Private data:</strong> Using broadly scoped personal access tokens can lead to information leakage between repositories</li>
</ul>
<h3 id="performance-and-resource-management">Performance and Resource Management</h3>
<ul>
<li><strong>Connection persistence:</strong> The CLI maintains persistent connections to servers that successfully register tools</li>
<li><strong>Automatic cleanup:</strong> Connections to servers providing no tools are automatically closed</li>
<li><strong>Timeout management:</strong> Configure appropriate timeouts based on your server's response characteristics</li>
<li><strong>Resource monitoring:</strong> MCP servers run as separate processes and consume system resources</li>
</ul>
<h3 id="schema-compatibility">Schema Compatibility</h3>
<ul>
<li><strong>Property stripping:</strong> The system automatically removes certain schema properties (<code>$schema</code>, <code>additionalProperties</code>) for Gemini API compatibility</li>
<li><strong>Name sanitization:</strong> Tool names are automatically sanitized to meet API requirements</li>
<li><strong>Conflict resolution:</strong> Tool name conflicts between servers are resolved through automatic prefixing</li>
</ul>
<p>This comprehensive integration makes MCP servers a powerful way to extend the Gemini CLI's capabilities while maintaining security, reliability, and ease of use.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>